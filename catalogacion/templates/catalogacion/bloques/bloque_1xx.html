{# Bloque 1XX - Punto de acceso principal #}
<section id="bloque-1xx" class="bloque-section">
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-person"></i>
                Bloque 1XX - Punto de Acceso Principal
            </h5>
        </div>
        <div class="card-body">
            
            {# Campo 100 - Compositor #}
            <div class="campo-marc">
                <div class="campo-titulo">
                    <span class="badge-marc">100</span>
                    <h6>Compositor</h6>
                </div>
                
                <div class="campo-grid">
                    {# Campo oculto para el ID del compositor #}
                    <input type="hidden" name="compositor" id="id_compositor" value="{{ form.compositor.value|default:'' }}">
                    
                    <div class="col-full">
                        <label class="form-label" for="id_compositor_texto">{{ form.compositor_texto.label }}</label>
                        {{ form.compositor_texto }}
                        <div class="form-text">Escriba para buscar compositores existentes o ingrese un nombre nuevo</div>
                        <div id="compositor-suggestions" class="autocomplete-suggestions"></div>
                        {% if form.compositor_texto.errors %}
                            <div class="invalid-feedback d-block">{{ form.compositor_texto.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="col-full">
                        <label class="form-label" for="id_compositor_coordenadas">{{ form.compositor_coordenadas.label }}</label>
                        {{ form.compositor_coordenadas }}
                        <div class="form-text">Fechas de vida (Ej: 1900-1980)</div>
                        {% if form.compositor_coordenadas.errors %}
                            <div class="invalid-feedback d-block">{{ form.compositor_coordenadas.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="col-full">
                        <label class="form-label" for="{{ form.termino_asociado.id_for_label }}">{{ form.termino_asociado.label }}</label>
                        {{ form.termino_asociado }}
                        {% if form.termino_asociado.errors %}
                            <div class="invalid-feedback">{{ form.termino_asociado.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="col-full">
                        <label class="form-label" for="{{ form.autoria.id_for_label }}">{{ form.autoria.label }}</label>
                        {{ form.autoria }}
                        {% if form.autoria.errors %}
                            <div class="invalid-feedback">{{ form.autoria.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                
                {# Subcampo repetible: 100 $e - Funciones #}
                <div class="mt-3">
                    <div class="campo-titulo">
                        <span class="badge-marc">100$e</span>
                        <h6>Funciones</h6>
                        <span class="badge-repetible">REPETIBLE</span>
                    </div>
                    {% include 'catalogacion/includes/formset_template.html' with formset=funciones_compositor titulo="Función" %}
                </div>
            </div>
            
            {# Campo 130 - Título uniforme (punto de acceso principal) #}
            <div class="campo-marc">
                <div class="campo-titulo">
                    <span class="badge-marc">130</span>
                    <h6>Título Uniforme Principal</h6>
                </div>
                
                <div class="campo-grid">
                    {# Campo oculto para el ID del título uniforme #}
                    <input type="hidden" name="titulo_uniforme" id="id_titulo_uniforme" value="{{ form.titulo_uniforme.value|default:'' }}">
                    
                    <div class="col-full">
                        <label class="form-label" for="id_titulo_uniforme_texto">{{ form.titulo_uniforme_texto.label }}</label>
                        {{ form.titulo_uniforme_texto }}
                        <div class="form-text">Escriba para buscar títulos existentes o ingrese uno nuevo</div>
                        <div id="titulo-uniforme-suggestions" class="autocomplete-suggestions"></div>
                        {% if form.titulo_uniforme_texto.errors %}
                            <div class="invalid-feedback d-block">{{ form.titulo_uniforme_texto.errors }}</div>
                        {% endif %}
                    </div>
                    
                    {# Campo oculto para el ID de la forma musical 130 #}
                    <input type="hidden" name="forma_130" id="id_forma_130" value="{{ form.forma_130.value|default:'' }}">
                    
                    <div class="col-half">
                        <label class="form-label" for="id_forma_130_texto">{{ form.forma_130_texto.label }}</label>
                        {{ form.forma_130_texto }}
                        <div class="form-text">Escriba para buscar formas musicales o ingrese una nueva</div>
                        <div id="forma-130-suggestions" class="autocomplete-suggestions"></div>
                        {% if form.forma_130_texto.errors %}
                            <div class="invalid-feedback d-block">{{ form.forma_130_texto.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="col-half">
                        <label class="form-label" for="{{ form.medio_interpretacion_130.id_for_label }}">{{ form.medio_interpretacion_130.label }}</label>
                        {{ form.medio_interpretacion_130 }}
                    </div>
                    
                    <div class="col-third">
                        <label class="form-label" for="{{ form.tonalidad_130.id_for_label }}">{{ form.tonalidad_130.label }}</label>
                        {{ form.tonalidad_130 }}
                    </div>
                    
                    <div class="col-third">
                        <label class="form-label" for="{{ form.numero_parte_130.id_for_label }}">{{ form.numero_parte_130.label }}</label>
                        {{ form.numero_parte_130 }}
                    </div>
                    
                    <div class="col-third">
                        <label class="form-label" for="{{ form.nombre_parte_130.id_for_label }}">{{ form.nombre_parte_130.label }}</label>
                        {{ form.nombre_parte_130 }}
                    </div>
                    
                    <div class="col-full">
                        <label class="form-label" for="{{ form.arreglo_130.id_for_label }}">{{ form.arreglo_130.label }}</label>
                        {{ form.arreglo_130 }}
                    </div>
                </div>
            </div>
            
            {# Campo 240 - Título uniforme subordinado #}
            <div class="campo-marc">
                <div class="campo-titulo">
                    <span class="badge-marc">240</span>
                    <h6>Título Uniforme (subordinado al 100)</h6>
                </div>
                
                <div class="campo-grid">
                    {# Campo oculto para el ID del título 240 #}
                    <input type="hidden" name="titulo_240" id="id_titulo_240" value="{{ form.titulo_240.value|default:'' }}">
                    
                    <div class="col-full">
                        <label class="form-label" for="id_titulo_240_texto">{{ form.titulo_240_texto.label }}</label>
                        {{ form.titulo_240_texto }}
                        <div class="form-text">Escriba para buscar títulos existentes o ingrese uno nuevo</div>
                        <div id="titulo-240-suggestions" class="autocomplete-suggestions"></div>
                        {% if form.titulo_240_texto.errors %}
                            <div class="invalid-feedback d-block">{{ form.titulo_240_texto.errors }}</div>
                        {% endif %}
                    </div>
                    
                    {# Campo oculto para el ID de la forma musical 240 #}
                    <input type="hidden" name="forma_240" id="id_forma_240" value="{{ form.forma_240.value|default:'' }}">
                    
                    <div class="col-half">
                        <label class="form-label" for="id_forma_240_texto">{{ form.forma_240_texto.label }}</label>
                        {{ form.forma_240_texto }}
                        <div class="form-text">Escriba para buscar formas musicales o ingrese una nueva</div>
                        <div id="forma-240-suggestions" class="autocomplete-suggestions"></div>
                        {% if form.forma_240_texto.errors %}
                            <div class="invalid-feedback d-block">{{ form.forma_240_texto.errors }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="col-half">
                        <label class="form-label" for="{{ form.medio_interpretacion_240.id_for_label }}">{{ form.medio_interpretacion_240.label }}</label>
                        {{ form.medio_interpretacion_240 }}
                    </div>
                    
                    <div class="col-third">
                        <label class="form-label" for="{{ form.tonalidad_240.id_for_label }}">{{ form.tonalidad_240.label }}</label>
                        {{ form.tonalidad_240 }}
                    </div>
                    
                    <div class="col-third">
                        <label class="form-label" for="{{ form.numero_parte_240.id_for_label }}">{{ form.numero_parte_240.label }}</label>
                        {{ form.numero_parte_240 }}
                    </div>
                    
                    <div class="col-third">
                        <label class="form-label" for="{{ form.nombre_parte_240.id_for_label }}">{{ form.nombre_parte_240.label }}</label>
                        {{ form.nombre_parte_240 }}
                    </div>
                    
                    <div class="col-full">
                        <label class="form-label" for="{{ form.arreglo_240.id_for_label }}">{{ form.arreglo_240.label }}</label>
                        {{ form.arreglo_240 }}
                    </div>
                </div>
            </div>
            
        </div>
    </div>
</section>
