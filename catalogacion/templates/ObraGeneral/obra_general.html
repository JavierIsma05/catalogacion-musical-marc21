{% extends 'base.html' %}
{% load static %}
{% block title %}Registrar Obra | MARC21 Musical{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
  <div class="row">

    <!-- ðŸ”¸ COLUMNA IZQUIERDA -->
    <div class="col-md-9">
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0">Registro MARC21 Musical</h5>
        </div>
        <div class="card-body">
          <form method="POST">
            {% csrf_token %}

            <!-- ðŸŸ© CABECERA O LÃDER -->
            <h5 class="text-primary">Cabecera o LÃ­der</h5>
            <div class="marc-block mb-4">
              <div class="row mb-2">
                <div class="col-md-6">
                  <label>06 â€“ Tipo de registro</label>
                  {{ form.tipo_registro }}
                </div>
                <div class="col-md-6">
                  <label>07 â€“ Nivel bibliogrÃ¡fico</label>
                  {{ form.nivel_bibliografico }}
                </div>
              </div>
            </div>

            <!-- ðŸŸ¨ BLOQUE 0XX -->
            <h5 class="text-primary mt-4">Bloque 0XX â€“ Campos de longitud variable</h5>

            <!-- 020 ## NÃºmero Internacional Normalizado para Libros -->
            <div class="marc-block mb-4">
              <h6><strong>020 ##</strong> â€” NÃºmero Internacional Normalizado para Libros (ISBN)</h6>
              <div class="row align-items-center mb-2">
                <div class="col-md-4">
                  <label>$a ISBN</label>
                </div>
                <div class="col-md-8">
                  {{ form.isbn }}
                </div>
              </div>
            </div>

            <!-- 024 2# Otros identificadores normalizados -->
            <div class="marc-block mb-4">
              <h6><strong>024 2#</strong> â€” Otros identificadores normalizados (ISMN)</h6>
              <div class="row align-items-center mb-2">
                <div class="col-md-4"><label>$a ISMN</label></div>
                <div class="col-md-8">{{ form.ismn }}</div>
              </div>
            </div>

            <!-- 028 20 NÃºmero de editor -->
            <div class="marc-block mb-4">
              <h6><strong>028 20</strong> â€” NÃºmero de editor o distribuidor</h6>
              <div class="row mb-2">
                <div class="col-md-4"><label>$a NÃºmero de editor</label></div>
                <div class="col-md-8">{{ form.numero_editor }}</div>
              </div>
              <div class="row">
                <div class="col-md-4"><label>Indicador</label></div>
                <div class="col-md-8">{{ form.indicador_028 }}</div>
              </div>
            </div>

            <!-- 031 ## InformaciÃ³n del Ã­ncipit musical -->
            <div class="marc-block mb-4">
              <h6><strong>031 ##</strong> â€” InformaciÃ³n del Ã­ncipit musical</h6>
              <div class="row mb-2">
                <div class="col-md-4"><label>$a NÂº de obra</label></div>
                <div class="col-md-8">{{ form.incipit_num_obra }}</div>
              </div>
              <div class="row mb-2">
                <div class="col-md-4"><label>$b NÂº de movimiento</label></div>
                <div class="col-md-8">{{ form.incipit_num_movimiento }}</div>
              </div>
              <div class="row mb-2">
                <div class="col-md-4"><label>$c NÂº de pasaje</label></div>
                <div class="col-md-8">{{ form.incipit_num_pasaje }}</div>
              </div>
              <div class="row mb-2">
                <div class="col-md-4"><label>$d TÃ­tulo o encabezamiento</label></div>
                <div class="col-md-8">{{ form.incipit_titulo }}</div>
              </div>
              <div class="row mb-2">
                <div class="col-md-4"><label>$m Voz/instrumento</label></div>
                <div class="col-md-8">{{ form.incipit_voz_instrumento }}</div>
              </div>
              <div class="row mb-2">
                <div class="col-md-4"><label>$p NotaciÃ³n musical</label></div>
                <div class="col-md-8">{{ form.incipit_notacion }}</div>
              </div>
              <div class="row">
                <div class="col-md-4"><label>$u URL (Ã­ncipit externo)</label></div>
                <div class="col-md-8">{{ form.incipit_url }}</div>
              </div>
            </div>

            <!-- 040 ## Fuente de catalogaciÃ³n -->
            <div class="marc-block mb-4">
              <h6><strong>040 ##</strong> â€” Fuente de catalogaciÃ³n</h6>
              <div class="row">
                <div class="col-md-4"><label>$a Centro catalogador</label></div>
                <div class="col-md-8">{{ form.centro_catalogador }}</div>
              </div>
            </div>

            <!-- 041 0# CÃ³digo de lengua -->
            <div class="marc-block mb-4">
              <h6><strong>041 0#</strong> â€” CÃ³digo de lengua</h6>
              <div class="row">
                <div class="col-md-4"><label>$a Idioma</label></div>
                <div class="col-md-8">{{ form.codigo_lengua }}</div>
              </div>
            </div>

            <!-- 044 ## CÃ³digo del paÃ­s -->
            <div class="marc-block mb-4">
              <h6><strong>044 ##</strong> â€” PaÃ­s de la entidad editora/productora</h6>
              <div class="row">
                <div class="col-md-4"><label>$a PaÃ­s</label></div>
                <div class="col-md-8">{{ form.codigo_pais }}</div>
              </div>
            </div>

            <!-- 092 ## ClasificaciÃ³n local -->
            <div class="marc-block mb-4">
              <h6><strong>092 ##</strong> â€” ClasificaciÃ³n local</h6>
              <div class="row mb-2">
                <div class="col-md-4"><label>$a InstituciÃ³n</label></div>
                <div class="col-md-8">{{ form.clasif_institucion }}</div>
              </div>
              <div class="row mb-2">
                <div class="col-md-4"><label>$b Proyecto</label></div>
                <div class="col-md-8">{{ form.clasif_proyecto }}</div>
              </div>
              <div class="row mb-2">
                <div class="col-md-4"><label>$c PaÃ­s</label></div>
                <div class="col-md-8">{{ form.clasif_pais }}</div>
              </div>
              <div class="row">
                <div class="col-md-4"><label>$d Ms/Imp</label></div>
                <div class="col-md-8">{{ form.clasif_ms_imp }}</div>
              </div>
            </div>

            <div class="d-flex gap-3 mt-4">
              <button type="submit" name="guardar_continuar" class="btn btn-success">
                Guardar y continuar editando
              </button>
              <button type="submit" name="guardar_cerrar" class="btn btn-primary">
                Guardar y cerrar
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- ðŸŸ¦ TABLA DE OBRAS -->
      <div class="card shadow-sm mt-3">
        <div class="card-header bg-secondary text-white">
          <h6 class="mb-0">Obras registradas</h6>
        </div>
        <div class="card-body">
          <table class="table table-bordered table-striped mt-2">
            <thead class="table-success">
              <tr>
                <th>001 NÂº Control</th>
                <th>005 Fecha/Hora</th>
                <th>008 CÃ³digo</th>
                <th>ISBN</th>
                <th>ISMN</th>
                <th>PaÃ­s</th>
                <th>Idioma</th>
              </tr>
            </thead>
            <tbody>
              {% for obra in obras %}
              <tr>
                <td>{{ obra.num_control }}</td>
                <td>{{ obra.fecha_hora_ultima_transaccion }}</td>
                <td>{{ obra.codigo_informacion }}</td>
                <td>{{ obra.isbn }}</td>
                <td>{{ obra.ismn }}</td>
                <td>{{ obra.get_codigo_pais_display }}</td>
                <td>{{ obra.get_codigo_lengua_display }}</td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="7" class="text-center">No hay registros aÃºn.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ðŸ”¹ COLUMNA DERECHA -->
    <div class="col-md-3">
      <div class="sidebar rounded shadow-sm p-3 bg-white">
        <h6>Secciones y acciones</h6>
        <a href="#" class="d-block mb-2 text-decoration-none">InformaciÃ³n del repositorio y sus relaciones</a>
        <a href="#" class="d-block mb-2 text-decoration-none">Personas e instituciones</a>
        <a href="#" class="d-block mb-2 text-decoration-none">TÃ­tulo y descripciÃ³n del contenido</a>
        <a href="#" class="d-block mb-2 text-decoration-none">Referencias y notas</a>
      </div>
    </div>
  </div>
</div>

<!-- ðŸ”¹ ESTILO ESPECÃFICO MARC -->
<style>
  .marc-block {
    border-left: 4px solid #198754;
    padding-left: 10px;
    background-color: #f9f9f9;
    border-radius: 4px;
  }
  .marc-block h6 {
    font-weight: bold;
    margin-bottom: 8px;
    color: #333;
  }
  label {
    font-weight: 500;
  }
</style>
{% endblock %}
