{# ============================================ #}
{# BLOQUE 3XX - DESCRIPCIÓN FÍSICA #}
{# ============================================ #}

<div class="card border-0 shadow-sm mb-4" id="bloque-3xx">
    <div class="card-body">
        <h2 class="section-title">Campos 3XX - Descripción Física</h2>
        
        <!-- 300 - DESCRIPCIÓN FÍSICA (NR - No Repetible) -->
        <div class="campo-repetible">
            <div class="campo-header">
                <h3 class="campo-label mb-0">300 - Descripción Física <small class="text-muted">(NR - No Repetible)</small></h3>
            </div>
            
            <!-- Subcampos NR -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label class="form-label small">$a Extensión <small class="text-muted">(NR - No Repetible)</small></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$a</span>
                        <input type="text" name="extension_300a" class="form-control" placeholder="Ej: 1 partitura (24 p.)">
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label small">$b Otras Características Físicas <small class="text-muted">(NR - No Repetible)</small></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$b</span>
                        <input type="text" name="otras_caracteristicas_300b" class="form-control" placeholder="Ej: ilustraciones">
                    </div>
                </div>
            </div>
            
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label small">$c Dimensiones <small class="text-muted">(NR - No Repetible)</small></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$c</span>
                        <input type="text" name="dimension_300c" class="form-control" placeholder="Ej: 30 cm">
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label small">$e Material Acompañante <small class="text-muted">(NR - No Repetible)</small></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$e</span>
                        <input type="text" name="material_acompanante_300e" class="form-control" placeholder="Ej: + 1 CD">
                    </div>
                </div>
            </div>
        </div>

        <!-- 340 - MEDIO FÍSICO (NR - No Repetible) -->
        <div class="campo-repetible">
            <div class="campo-header">
                <h3 class="campo-label mb-0">340 - Medio Físico <small class="text-muted">(NR - No Repetible)</small></h3>
            </div>
            
            <!-- Subcampo $d - Técnica (NR - No Repetible) -->
            <div class="subcampo-group">
                <label class="subcampo-label mb-2">$d Técnica de Registro <small class="text-muted">(NR - No Repetible)</small></label>
                <div class="input-group input-group-sm">
                    <span class="input-group-text">$d</span>
                    <select name="tecnica_340d" class="form-select form-select-sm" title="Técnica de registro">
                        <option value="autógrafo">Autógrafo</option>
                        <option value="posible autógrafo">Posible autógrafo</option>
                        <option value="manuscrito" selected>Manuscrito</option>
                        <option value="manuscrito de copista no identificado">Manuscrito de copista no identificado</option>
                        <option value="impreso">Impreso</option>
                        <option value="fotocopia de manuscrito">Fotocopia de manuscrito</option>
                        <option value="fotocopia de impreso">Fotocopia de impreso</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 348 - CARACTERÍSTICAS MÚSICA NOTADA (NR - No Repetible) -->
        <div class="campo-repetible">
            <div class="campo-header">
                <h3 class="campo-label mb-0">348 - Características Música Notada <small class="text-muted">(NR - No Repetible)</small></h3>
            </div>
            
            <!-- Subcampo $a - Formato (NR - No Repetible) -->
            <div class="subcampo-group">
                <label class="subcampo-label mb-2">$a Formato de Presentación <small class="text-muted">(NR - No Repetible)</small></label>
                <div class="input-group input-group-sm">
                    <span class="input-group-text">$a</span>
                    <select name="formato_348a" class="form-select form-select-sm" title="Formato de presentación">
                        <option value="parte">Parte</option>
                        <option value="partitura" selected>Partitura</option>
                        <option value="partitura de coro">Partitura de coro</option>
                        <option value="partitura piano vocal">Partitura piano-vocal</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 382 - MEDIO DE INTERPRETACIÓN (Repetible) -->
        <div class="campo-repetible">
            <div class="campo-header">
                <h3 class="campo-label mb-0">382 - Medio de Interpretación</h3>
                <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarMedioInterpretacion382()">
                    <i class="bi bi-plus"></i> Agregar
                </button>
            </div>
            
            <!-- Primer medio de interpretación (siempre visible) -->
            <div class="campo-repetible" data-campo="medio-interpretacion-382-0">
                <div class="campo-header">
                    <span class="campo-label">Medio de Interpretación #1</span>
                    <button type="button" class="btn btn-outline-danger btn-remove" onclick="eliminarCampo('medio-interpretacion-382-0')">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </div>
                
                <!-- Subcampo $a - Medio (Repetible) -->
                <div class="subcampo-group mb-3">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="subcampo-label mb-0">$a Medio de Interpretación</label>
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarMedio382a(0)" aria-label="Agregar medio">
                            <i class="bi bi-plus"></i>
                        </button>
                    </div>
                    <div id="medios-382a-0">
                        <div class="mb-2" data-subcampo="medio-382a-0-0">
                            <div class="input-group input-group-sm">
                                <span class="input-group-text">$a</span>
                                <select name="medio_382_a_0_0" class="form-select form-select-sm" title="Medio de interpretación">
                                    <option value="piano" selected>Piano</option>
                                    <option value="dos pianos">Dos pianos</option>
                                    <option value="piano a cuatro manos">Piano a cuatro manos</option>
                                    <option value="piano con acompañamiento">Piano con acompañamiento</option>
                                </select>
                                <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('medio-382a-0-0')" aria-label="Eliminar medio">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Subcampo $b - Solista (NR - No Repetible) -->
                <div class="subcampo-group mb-3">
                    <label class="subcampo-label mb-2">$b Solista <small class="text-muted">(NR - No Repetible)</small></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$b</span>
                        <select name="solista_382b" class="form-select form-select-sm" title="Solista">
                            <option value="piano" selected>Piano</option>
                        </select>
                    </div>
                </div>
                
                <!-- Subcampo $n - Número de Intérpretes (Repetible) -->
                <div class="subcampo-group">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="subcampo-label mb-0">$n Número de Intérpretes</label>
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarNumeroInterpretes382(0)" aria-label="Agregar número de intérpretes">
                            <i class="bi bi-plus"></i>
                        </button>
                    </div>
                    <div id="numeros-interpretes-382-0">
                        <div class="mb-2" data-subcampo="numero-interpretes-382-0-0">
                            <div class="input-group input-group-sm">
                                <span class="input-group-text">$n</span>
                                <input type="number" min="1" name="numero_interpretes_382_n_0_0" class="form-control" placeholder="Ej: 2, 4, 8">
                                <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('numero-interpretes-382-0-0')" aria-label="Eliminar número de intérpretes">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Container para medios de interpretación adicionales -->
            <div id="medios-interpretacion-382-container"></div>
        </div>

        <!-- 383 - DESIGNACIÓN NUMÉRICA (NR - No Repetible) -->
        <div class="campo-repetible">
            <div class="campo-header">
                <h3 class="campo-label mb-0">383 - Designación Numérica de Obra Musical <small class="text-muted">(NR - No Repetible)</small></h3>
            </div>
            
            <div class="row g-3">
                <div class="col-md-6">
                    <!-- Subcampo $a - Número de Obra (NR - No Repetible) -->
                    <label class="form-label small">$a Número de Obra <small class="text-muted">(NR - No Repetible)</small></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$a</span>
                        <input type="text" name="numero_obra_383a" class="form-control" placeholder="Ej: K. 545, BWV 1001">
                    </div>
                </div>
                <div class="col-md-6">
                    <!-- Subcampo $b - Opus (NR - No Repetible) -->
                    <label class="form-label small">$b Opus <small class="text-muted">(NR - No Repetible)</small></label>
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$b</span>
                        <input type="text" name="opus_383b" class="form-control" placeholder="Ej: Op. 27, No. 2">
                    </div>
                </div>
            </div>
        </div>

        <!-- 384 - TONALIDAD (No Repetible) -->
        <div class="campo-repetible">
            <div class="campo-header">
                <h3 class="campo-label mb-0">384 - Tonalidad</h3>
            </div>
            
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label small">$a Tonalidad</label>
                    <select name="tonalidad_384" class="form-select" title="Seleccionar tonalidad">
                        <option value="">-- Seleccionar --</option>
                        {% for key, value in tonalidades %}
                        <option value="{{ key }}">{{ value }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
    </div>
</div>
