{# ============================================ #}
{# BLOQUE 4XX - SERIES #}
{# ============================================ #}

<div class="card border-0 shadow-sm mb-4" id="bloque-4xx">
    <div class="card-body">
        <h2 class="section-title">Campos 4XX - Series</h2>
        
        <!-- 490 - MENCIÓN DE SERIE (Repetible) -->
        <div class="campo-repetible">
            <div class="campo-header">
                <h3 class="campo-label mb-0">490 - Mención de Serie</h3>
                <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarMencionSerie()">
                    <i class="bi bi-plus"></i> Agregar
                </button>
            </div>
            
            <!-- Primera mención de serie (siempre visible) -->
            <div class="campo-repetible" data-campo="mencion-serie-0">
                <div class="campo-header">
                    <span class="campo-label">Mención de Serie #1</span>
                    <button type="button" class="btn btn-outline-danger btn-remove" onclick="eliminarCampo('mencion-serie-0')">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </div>
                
                <!-- Relación de serie (primer indicador) -->
                <div class="row g-3 mb-3">
                    <div class="col-md-12">
                        <label class="form-label small">Relación de la Serie (Primer Indicador)</label>
                        <select name="mencion_serie_relacion_0" class="form-select" title="Relación de la serie">
                            <option value="0" selected>0 - No relacionado (sin entrada secundaria)</option>
                            <option value="1">1 - Relacionado (con entrada secundaria 800-830)</option>
                        </select>
                        <small class="form-text text-muted">
                            Indica si se crea o no una entrada secundaria de serie en los campos 800-830.
                        </small>
                    </div>
                </div>
                
                <!-- Subcampo $a - Título de Serie (Repetible) -->
                <div class="subcampo-group mb-3">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="subcampo-label mb-0">$a Título de Serie</label>
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarTituloSerie490(0)" aria-label="Agregar título de serie">
                            <i class="bi bi-plus"></i>
                        </button>
                    </div>
                    <div id="titulos-serie-490-0">
                        <div class="mb-2" data-subcampo="titulo-serie-490-0-0">
                            <div class="input-group input-group-sm">
                                <span class="input-group-text">$a</span>
                                <input type="text" 
                                       name="titulo_serie_490_a_0_0" 
                                       class="form-control" 
                                       placeholder="Ej: Colección Támesis. Serie A">
                                <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('titulo-serie-490-0-0')" aria-label="Eliminar título de serie">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Subcampo $v - Volumen/Número (Repetible) -->
                <div class="subcampo-group">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="subcampo-label mb-0">$v Designación de Volumen/Número</label>
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarVolumenSerie490(0)" aria-label="Agregar volumen">
                            <i class="bi bi-plus"></i>
                        </button>
                    </div>
                    <div id="volumenes-serie-490-0">
                        <div class="mb-2" data-subcampo="volumen-serie-490-0-0">
                            <div class="input-group input-group-sm">
                                <span class="input-group-text">$v</span>
                                <input type="text" 
                                       name="volumen_serie_490_v_0_0" 
                                       class="form-control" 
                                       placeholder="Ej: 260, Vol. 5, Tomo III">
                                <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('volumen-serie-490-0-0')" aria-label="Eliminar volumen">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Container para menciones de serie adicionales -->
            <div id="menciones-serie-container"></div>
        </div>
    </div>
</div>
