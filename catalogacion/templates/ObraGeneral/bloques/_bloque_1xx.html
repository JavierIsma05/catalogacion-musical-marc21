{# ============================================ #}
{# BLOQUE 1XX - ENTRADAS PRINCIPALES #}
{# ============================================ #}

<div class="card border-0 shadow-sm mb-4" id="bloque-1xx">
    <div class="card-body">
        <h2 class="section-title">Campos 1XX - Entradas Principales</h2>
        
        <!-- 100 - COMPOSITOR (con subcampos repetibles) -->
        <div class="mb-4">
            <h3 class="h6 mb-3">100 - Compositor</h3>
            <div class="row g-3 mb-3">
                <div class="col-md-8">
                    <label class="form-label small">$a Apellidos, Nombres</label>
                    <input type="text" name="compositor_apellidos_nombres" class="form-control" 
                           placeholder="Ej: Beethoven, Ludwig van">
                </div>
                <div class="col-md-4">
                    <label class="form-label small">$d Fechas Asociadas</label>
                    <input type="text" name="compositor_fechas" class="form-control" 
                           placeholder="Ej: 1770-1827">
                </div>
            </div>

            <!-- Subcampo $e - Función (Repetible) -->
            <div class="subcampo-group">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$e Función del Compositor</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarFuncionCompositor()">
                        <i class="bi bi-plus"></i> Función
                    </button>
                </div>
                <div id="funciones-compositor">
                    <div class="mb-2" data-subcampo="funcion-compositor-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$e</span>
                            <select name="funcion_compositor_e_0" class="form-select form-select-sm">
                                <option value="arreglista">Arreglista</option>
                                <option value="coeditor">Coeditor</option>
                                <option value="compilador">Compilador</option>
                                <option value="compositor" selected>Compositor</option>
                                <option value="copista">Copista</option>
                                <option value="dedicatario">Dedicatario</option>
                                <option value="editor">Editor</option>
                                <option value="prologuista">Prologuista</option>
                            </select>
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('funcion-compositor-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $j - Atribución (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$j Calificador de Atribución</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarAtribucionCompositor()">
                        <i class="bi bi-plus"></i> Atribución
                    </button>
                </div>
                <div id="atribuciones-compositor">
                    <div class="mb-2" data-subcampo="atribucion-compositor-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$j</span>
                            <select name="atribucion_compositor_j_0" class="form-select form-select-sm">
                                <option value="atribuida">Atribuida</option>
                                <option value="certificada" selected>Certificada</option>
                                <option value="erronea">Errónea</option>
                            </select>
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('atribucion-compositor-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 130 - TÍTULO UNIFORME (con subcampos repetibles) -->
        <div class="mb-4">
            <h3 class="h6 mb-3">130 - Título Uniforme</h3>
            <div class="alert alert-warning" role="alert">
                <i class="bi bi-exclamation-triangle"></i>
                <small>Usar solo cuando NO se haya ingresado compositor en el campo 100.</small>
            </div>
            
            <div class="row g-3 mb-3">
                <div class="col-md-8">
                    <label class="form-label small">$a Título Uniforme</label>
                    <input type="text" name="titulo_uniforme_130" class="form-control" 
                           placeholder="Ej: Sinfonías, piano, do menor">
                </div>
                <div class="col-md-4">
                    <label class="form-label small">$r Tonalidad</label>
                    <select name="titulo_uniforme_tonalidad" class="form-select">
                        <option value="">-- Seleccionar --</option>
                        {% for key, value in tonalidades %}
                        <option value="{{ key }}">{{ value }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- Subcampo $l - Idioma (Repetible) -->
            <div class="subcampo-group">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$l Idioma de la Obra</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarIdiomaObra130()">
                        <i class="bi bi-plus"></i> Idioma
                    </button>
                </div>
                <div id="idiomas-obra-130">
                    <div class="mb-2" data-subcampo="idioma-130-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$l</span>
                            <input type="text" name="idioma_130_l_0" class="form-control form-control-sm" placeholder="Español">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('idioma-130-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $m - Medio de Ejecución (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$m Medio de Ejecución para la Música</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarMedioEjecucion130()">
                        <i class="bi bi-plus"></i> Medio
                    </button>
                </div>
                <div id="medios-ejecucion-130">
                    <div class="mb-2" data-subcampo="medio-130-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$m</span>
                            <input type="text" name="medio_ejecucion_130_m_0" class="form-control form-control-sm" placeholder="Piano, violín">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('medio-130-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $o - Arreglo (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$o Arreglo de la Música</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarArreglo130()">
                        <i class="bi bi-plus"></i> Arreglo
                    </button>
                </div>
                <div id="arreglos-130">
                    <div class="mb-2" data-subcampo="arreglo-130-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$o</span>
                            <input type="text" name="arreglo_130_o_0" class="form-control form-control-sm" placeholder="Arreglo">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('arreglo-130-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $k - Forma (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$k Forma</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarForma130()">
                        <i class="bi bi-plus"></i> Forma
                    </button>
                </div>
                <div id="formas-130">
                    <div class="mb-2" data-subcampo="forma-130-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$k</span>
                            <input type="text" name="forma_130_k_0" class="form-control form-control-sm" placeholder="Sonata, Sinfonía">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('forma-130-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $n - Número de parte/sección (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$n Número de Parte/Sección</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarNumeroParte130()">
                        <i class="bi bi-plus"></i> Número
                    </button>
                </div>
                <div id="numeros-parte-130">
                    <div class="mb-2" data-subcampo="numero-parte-130-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$n</span>
                            <input type="text" name="numero_parte_130_n_0" class="form-control form-control-sm" placeholder="No. 1">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('numero-parte-130-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $p - Nombre de parte/sección (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$p Nombre de Parte/Sección</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarNombreParte130()">
                        <i class="bi bi-plus"></i> Nombre
                    </button>
                </div>
                <div id="nombres-parte-130">
                    <div class="mb-2" data-subcampo="nombre-parte-130-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$p</span>
                            <input type="text" name="nombre_parte_130_p_0" class="form-control form-control-sm" placeholder="Allegro">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('nombre-parte-130-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 240 - TÍTULO UNIFORME (ENTRADA SECUNDARIA) -->
        <div class="mb-4">
            <h3 class="h6 mb-3">240 - Título Uniforme (Entrada Secundaria)</h3>
            <div class="alert alert-info" role="alert">
                <i class="bi bi-info-circle"></i>
                <small>Usar cuando SÍ existe compositor en el campo 100 y se requiere título uniforme adicional.</small>
            </div>
            
            <div class="row g-3 mb-3">
                <div class="col-md-8">
                    <label class="form-label small">$a Título Uniforme</label>
                    <input type="text" name="titulo_240" class="form-control" 
                           placeholder="Ej: Conciertos, violín, orquesta">
                </div>
                <div class="col-md-4">
                    <label class="form-label small">$r Tonalidad</label>
                    <select name="titulo_240_tonalidad" class="form-select">
                        <option value="">-- Seleccionar --</option>
                        {% for key, value in tonalidades %}
                        <option value="{{ key }}">{{ value }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- Subcampo $l - Idioma (Repetible) -->
            <div class="subcampo-group">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$l Idioma de la Obra</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarIdiomaObra240()">
                        <i class="bi bi-plus"></i> Idioma
                    </button>
                </div>
                <div id="idiomas-obra-240">
                    <div class="mb-2" data-subcampo="idioma-240-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$l</span>
                            <input type="text" name="idioma_240_l_0" class="form-control form-control-sm" placeholder="Español">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('idioma-240-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $m - Medio de Ejecución (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$m Medio de Ejecución para la Música</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarMedioEjecucion240()">
                        <i class="bi bi-plus"></i> Medio
                    </button>
                </div>
                <div id="medios-ejecucion-240">
                    <div class="mb-2" data-subcampo="medio-240-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$m</span>
                            <input type="text" name="medio_ejecucion_240_m_0" class="form-control form-control-sm" placeholder="Piano, violín">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('medio-240-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $o - Arreglo (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$o Arreglo de la Música</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarArreglo240()">
                        <i class="bi bi-plus"></i> Arreglo
                    </button>
                </div>
                <div id="arreglos-240">
                    <div class="mb-2" data-subcampo="arreglo-240-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$o</span>
                            <input type="text" name="arreglo_240_o_0" class="form-control form-control-sm" placeholder="Arreglo">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('arreglo-240-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $k - Forma (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$k Forma</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarForma240()">
                        <i class="bi bi-plus"></i> Forma
                    </button>
                </div>
                <div id="formas-240">
                    <div class="mb-2" data-subcampo="forma-240-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$k</span>
                            <input type="text" name="forma_240_k_0" class="form-control form-control-sm" placeholder="Sonata, Sinfonía">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('forma-240-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $n - Número de parte/sección (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$n Número de Parte/Sección</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarNumeroParte240()">
                        <i class="bi bi-plus"></i> Número
                    </button>
                </div>
                <div id="numeros-parte-240">
                    <div class="mb-2" data-subcampo="numero-parte-240-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$n</span>
                            <input type="text" name="numero_parte_240_n_0" class="form-control form-control-sm" placeholder="No. 1">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('numero-parte-240-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subcampo $p - Nombre de parte/sección (Repetible) -->
            <div class="subcampo-group mt-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subcampo-label mb-0">$p Nombre de Parte/Sección</label>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarNombreParte240()">
                        <i class="bi bi-plus"></i> Nombre
                    </button>
                </div>
                <div id="nombres-parte-240">
                    <div class="mb-2" data-subcampo="nombre-parte-240-0">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">$p</span>
                            <input type="text" name="nombre_parte_240_p_0" class="form-control form-control-sm" placeholder="Allegro">
                            <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('nombre-parte-240-0')">
                                <i class="bi bi-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
