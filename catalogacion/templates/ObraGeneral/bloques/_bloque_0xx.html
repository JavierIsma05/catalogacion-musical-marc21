{# ============================================ #}
{# BLOQUE 0XX - CAMPOS DE CONTROL #}
{# ============================================ #}

<!-- 020 - ISBN (Repetible) -->
<div class="card border-0 shadow-sm mb-5" id="bloque-0xx">
    <div class="card-body">
        <h2 class="section-title">020 - ISBN</h2>
        <div id="isbn-container">
            <div class="campo-repetible" data-campo="isbn-0">
                <div class="campo-header">
                    <span class="campo-label">ISBN #1</span>
                    <button type="button" class="btn btn-outline-danger btn-remove" onclick="eliminarCampo('isbn-0')">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </div>
                <div class="row g-2">
                    <div class="col-md-12">
                        <label class="subcampo-label">$a ISBN</label>
                        <input type="text" name="isbn_a_0" class="form-control" placeholder="978-0-123456-78-9">
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-outline-primary btn-add-field" onclick="agregarISBN()">
            <i class="bi bi-plus-circle"></i> Agregar ISBN
        </button>
    </div>
</div>

<!-- 024 - ISMN (Repetible) -->
<div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
        <h2 class="section-title">024 - ISMN (N√∫mero Internacional Normalizado de M√∫sica)</h2>
        <div id="ismn-container">
            <div class="campo-repetible" data-campo="ismn-0">
                <div class="campo-header">
                    <span class="campo-label">ISMN #1</span>
                    <button type="button" class="btn btn-outline-danger btn-remove" onclick="eliminarCampo('ismn-0')">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </div>
                <div class="row g-2">
                    <div class="col-md-12">
                        <label class="subcampo-label">$a ISMN</label>
                        <input type="text" name="ismn_a_0" class="form-control" placeholder="M-001-12345-6-7">
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-outline-primary btn-add-field" onclick="agregarISMN()">
            <i class="bi bi-plus-circle"></i> Agregar ISMN
        </button>
    </div>
</div>

<!-- 028 - N√∫mero de Editor (Repetible) -->
<div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
        <h2 class="section-title">028 - N√∫mero de Editor de M√∫sica</h2>
        <div id="numero-editor-container">
            <div class="campo-repetible" data-campo="numero-editor-0">
                <div class="campo-header">
                    <span class="campo-label">N√∫mero de Editor #1</span>
                    <button type="button" class="btn btn-outline-danger btn-remove" onclick="eliminarCampo('numero-editor-0')">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </div>
                <div class="row g-2 mb-2">
                    <div class="col-md-12">
                        <label class="subcampo-label">$a N√∫mero de Editor</label>
                        <input type="text" name="numero_editor_a_0" class="form-control" placeholder="Ej: B. & H. 8797">
                    </div>
                </div>
                <div class="row g-2">
                    <div class="col-md-6">
                        <label class="subcampo-label">Indicador 1 - Tipo de N√∫mero</label>
                        <select name="numero_editor_tipo_0" class="form-select">
                            {% for value, label in tipo_numero_editor %}
                            <option value="{{ value }}" {% if value == '2' %}selected{% endif %}>{{ value }} - {{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="subcampo-label">Indicador 2 - Control de Nota</label>
                        <select name="numero_editor_control_0" class="form-select">
                            {% for value, label in control_nota_editor %}
                            <option value="{{ value }}" {% if value == '0' %}selected{% endif %}>{{ value }} - {{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-outline-primary btn-add-field" onclick="agregarNumeroEditor()">
            <i class="bi bi-plus-circle"></i> Agregar N√∫mero de Editor
        </button>
    </div>
</div>

<!-- 031 - Incipit Musical (Repetible con URLs repetibles) -->
<div class="card border-0 shadow-sm mb-4">
  <div class="card-body">
    <h2 class="section-title mb-3">031 - Incipit Musical</h2>

    <div id="incipit-container">
      <div class="campo-repetible" data-campo="incipit-0">
        <div class="campo-header d-flex justify-content-between align-items-center mb-3">
          <span class="campo-label fw-semibold">Incipit #1</span>
          <button type="button"
                  class="btn btn-outline-danger btn-sm btn-remove"
                  onclick="eliminarCampo('incipit-0')">
            <i class="bi bi-trash"></i> Eliminar
          </button>
        </div>

        <!-- METADATOS B√ÅSICOS -->
        <div class="row g-3 mb-3">
          <div class="col-md-4">
            <label class="subcampo-label">$a N√∫mero de Obra</label>
            <input type="number"
                   name="incipit_a_0"
                   class="form-control"
                   placeholder="{{ incipit_defaults.numero_obra }}"
                   value="{{ incipit_defaults.numero_obra }}"
                   min="1">
          </div>
          <div class="col-md-4">
            <label class="subcampo-label">$b N√∫mero de Movimiento</label>
            <input type="number"
                   name="incipit_b_0"
                   class="form-control"
                   placeholder="{{ incipit_defaults.numero_movimiento }}"
                   value="{{ incipit_defaults.numero_movimiento }}"
                   min="1">
          </div>
          <div class="col-md-4">
            <label class="subcampo-label">$c N√∫mero de Pasaje</label>
            <input type="number"
                   name="incipit_c_0"
                   class="form-control"
                   placeholder="{{ incipit_defaults.numero_pasaje }}"
                   value="{{ incipit_defaults.numero_pasaje }}"
                   min="1">
          </div>

          <div class="col-md-4">
            <label class="subcampo-label">$d T√≠tulo o Encabezamiento (opcional)</label>
            <input type="text"
                   name="incipit_d_0"
                   class="form-control"
                   placeholder="Ej: Aria, Allegro, Andante">
          </div>

          <!-- CLAVE -->
          <div class="col-md-4">
            <label class="subcampo-label">$g Clave</label>
            <select name="incipit_g_0"
                    id="incipit_g_0"
                    class="form-select">
              <option value="">‚Äî Seleccionar clave ‚Äî</option>
              <option value="G-2" selected>Clave de Sol (G-2)</option>
              <option value="C-3">Clave de Do (C-3)</option>
              <option value="F-4">Clave de Fa (F-4)</option>
            </select>
            <small class="text-muted">
              Valores que se usar√°n en la cabecera PAE: %G-2, %C-3, %F-4.
            </small>
          </div>

          <div class="col-md-4">
            <label class="subcampo-label">$m Voz/Instrumento</label>
            <input type="text"
                   name="incipit_m_0"
                   class="form-control"
                   placeholder="{{ incipit_defaults.voz_instrumento }}"
                   value="{{ incipit_defaults.voz_instrumento }}">
            <small class="text-muted">
              Predeterminado: {{ incipit_defaults.voz_instrumento }}
            </small>
          </div>

          <!-- ARMADURA -->
          <div class="col-md-4">
            <label class="subcampo-label">$n Armadura</label>
            <select name="incipit_n_0"
                    id="incipit_n_0"
                    class="form-select">
              <option value="nd" selected>Sin armadura (nd)</option>
              <optgroup label="Sostenidos (‚ôØ)">
                <option value="xF">1‚ôØ (F)</option>
                <option value="xFC">2‚ôØ (F, C)</option>
                <option value="xFCG">3‚ôØ (F, C, G)</option>
                <option value="xFCGD">4‚ôØ (F, C, G, D)</option>
                <option value="xFCGDA">5‚ôØ (F, C, G, D, A)</option>
                <option value="xFCGDAE">6‚ôØ (F, C, G, D, A, E)</option>
                <option value="xFCGDAEB">7‚ôØ (F, C, G, D, A, E, B)</option>
              </optgroup>
              <optgroup label="Bemoles (‚ô≠)">
                <option value="bB">1‚ô≠ (B‚ô≠)</option>
                <option value="bBE">2‚ô≠ (B‚ô≠, E‚ô≠)</option>
                <option value="bBEA">3‚ô≠ (B‚ô≠, E‚ô≠, A‚ô≠)</option>
                <option value="bBEAD">4‚ô≠ (B‚ô≠, E‚ô≠, A‚ô≠, D‚ô≠)</option>
                <option value="bBEADG">5‚ô≠ (B‚ô≠, E‚ô≠, A‚ô≠, D‚ô≠, G‚ô≠)</option>
                <option value="bBEADGC">6‚ô≠ (B‚ô≠, E‚ô≠, A‚ô≠, D‚ô≠, G‚ô≠, C‚ô≠)</option>
                <option value="bBEADGCF">7‚ô≠ (B‚ô≠, E‚ô≠, A‚ô≠, D‚ô≠, G‚ô≠, C‚ô≠, F‚ô≠)</option>
              </optgroup>
            </select>
            <small class="text-muted">
              Internamente se usar√°n valores como FCG, bBE, nd (sin $x).
            </small>
          </div>

          <!-- TIEMPO -->
          <div class="col-md-4">
            <label class="subcampo-label">$o Tiempo</label>
            <select name="incipit_o_0"
                    id="incipit_o_0"
                    class="form-select">
              <option value="4/4" selected>4/4</option>
              <option value="3/4">3/4</option>
              <option value="2/4">2/4</option>
              <option value="2/2">2/2</option>
              <option value="3/8">3/8</option>
              <option value="6/8">6/8</option>
              <option value="9/8">9/8</option>
              <option value="12/8">12/8</option>
              <option value="3/2">3/2</option>
            </select>
            <small class="text-muted">
              Mismos valores que los botones de comp√°s (sin @).
            </small>
          </div>

          <div class="col-md-4">
            <label class="subcampo-label">$r Tonalidad o modo</label>
            <input type="number"
                   name="incipit_r_0"
                   class="form-control"
                   placeholder="{{ incipit_defaults.numero_movimiento }}"
                   value="{{ incipit_defaults.numero_movimiento }}"
                   min="1">
          </div>
        </div>

        <!-- CABECERA ‚Üí BOT√ìN APLICAR -->
        <div class="row align-items-center mb-3">
          <div class="col-md-6">
            <label class="subcampo-label mb-1">$p Notaci√≥n Musical (opcional)</label>
            <small class="text-muted d-block">
              Usa la cabecera (clave, armadura, tiempo) y el canvas para generar el c√≥digo PAE.
            </small>
          </div>
          <div class="col-md-6 text-md-end mt-2 mt-md-0">
                <button type="button"
                        id="parse-inc-p0"
                        class="btn btn-outline-secondary btn-sm">
                Aplicar cabecera al canvas
                </button>
            </div>


            <!-- CANVAS + TOOLBAR COMPACTO -->
            <div class="border rounded p-10 bg-light">
            <div class="d-flex align-items-center gap-2">

                <!-- TOOLBAR IZQUIERDA COMPACTA -->
                <div id="incipit-toolbar-031"
                    class="d-flex flex-column gap-2 flex-shrink-0 btn-music"
                    style="max-width: 300px;">

                <!-- CLAVE -->
                <div>
                    <div class="text-muted small mb-1 ">Clave</div>
                    <div class="btn-group btn-group-sm" role="group" aria-label="Claves">
                    <button type="button"
                            class="btn btn-outline-primary btn-music"
                            style="margin:1px;"
                            title="Clave de Sol"
                            onclick="ClefPressed('1')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÑû</span>
                    </button>
                    <button type="button"
                            class="btn btn-outline-primary btn-music"
                            style="margin:1px;"
                            title="Clave de Do"
                            onclick="ClefPressed('2')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÑ°</span>
                    </button>
                    <button type="button"
                            class="btn btn-outline-primary btn-music"
                            style="margin:1px;"
                            title="Clave de Fa"
                            onclick="ClefPressed('3')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÑ¢</span>
                    </button>
                    </div>
                </div>

                <!-- FIGURAS -->
                <div>
                    <div class="text-muted small mb-1">Figuras</div>
                    <div class="btn-group btn-group-sm flex-wrap" role="group" aria-label="Figuras">
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Redonda" onclick="NotePressed('d')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÖù</span>
                    </button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Blanca" onclick="NotePressed('e')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÖû</span>
                    </button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Negra" onclick="NotePressed('f')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÖü</span>
                    </button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Corchea" onclick="NotePressed('g')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÖ†</span>
                    </button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Semicorchea" onclick="NotePressed('h')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÖ°</span>
                    </button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Fusa" onclick="NotePressed('i')">
                        <span style="font-family: Maestro,'Bravura','Music'; font-size:24px;">ùÖ¢</span>
                    </button>
                    <button type="button"
                            class="btn btn-outline-primary btn-music"
                            style="margin:1px;"
                            title="Puntillo"
                            onclick="dotPressed()">
                        ¬∑
                    </button>
                    </div>

                                    </div>

                <!-- ALTERACIONES -->
                <div>
                    <div class="text-muted small mb-1">Alteraciones</div>
                    <div class="btn-group" role="group" aria-label="Alteraciones">
                        <button type="button"
                                class="btn btn-outline-primary btn-music"
                                style="margin:1px; font-size: 20px;"
                                title="Doble sostenido"
                                onclick="alterationPressed('l')">
                            ùÑ™
                        </button>
                        <button type="button"
                                class="btn btn-outline-primary btn-music"
                                style="margin:1px; font-size: 20px;"
                                title="Sostenido"
                                onclick="alterationPressed('p')">
                            ‚ôØ
                        </button>
                        <button type="button"
                                class="btn btn-outline-primary btn-music"
                                style="margin:1px; font-size: 20px;"
                                title="Becuadro"
                                onclick="alterationPressed('o')">
                            ‚ôÆ
                        </button>
                        <button type="button"
                                class="btn btn-outline-primary btn-music"
                                style="margin:1px; font-size: 20px;"
                                title="Bemol"
                                onclick="alterationPressed('m')">
                            ‚ô≠
                        </button>
                        <button type="button"
                                class="btn btn-outline-primary btn-music"
                                style="margin:1px; font-size: 20px;"
                                title="Doble bemol"
                                onclick="alterationPressed('n')">
                            ùÑ´
                        </button>
                    </div>
                </div>

                <!-- COMP√ÅS + BARRAS -->
                <div>
                    <div class="text-muted  mb-1">Comp√°s</div>
                    <div class="btn-group btn-group-sm flex-wrap" role="group" aria-label="Compases">
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('t')">4/4</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('w')">3/4</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('v')">2/4</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('u')">2/2</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('x')">3/8</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('y')">6/8</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('z')">9/8</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('{')">12/8</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" onclick="TimePressed('|')">3/2</button>
                    </div>

                    <div class="text-muted mt-2 mb-1">Barras</div>
                    <div class="btn-group btn-group-sm flex-wrap" role="group" aria-label="Barras">
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Barra simple" onclick="BarPressed(';')">|</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Doble barra" onclick="BarPressed('<')">||</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Inicio repetici√≥n" onclick="BarPressed('>')">|:</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Fin repetici√≥n" onclick="BarPressed('?')">:||</button>
                    <button type="button" class="btn btn-outline-primary btn-music" style="margin:1px;" title="Repetici√≥n doble" onclick="BarPressed('@')">:||:</button>
                    </div>
                </div>
                <!-- ALTURA -->
                <div>
                        <div class="text-muted" style="margin-left: 11px;">Altura</div>
                        <div class="btn-group btn-group-sm flex-wrap" role="group">
                        <button type="button"
                                class="btn btn-outline-secondary btn-music"
                                style="margin:1px;"
                                title="Subir altura"
                                onclick="CanvasIncipit.toneUpDown(CanvasIncipit, -1)">
                            ‚ñ≤
                        </button>
                        <button type="button"
                                class="btn btn-outline-secondary btn-music"
                                style="margin:1px;"
                                title="Bajar altura"
                                onclick="CanvasIncipit.toneUpDown(CanvasIncipit, 1)">
                            ‚ñº
                        </button>
                        </div>

                </div>
                <div class="btn-group btn-group-sm flex-wrap mt-1" role="group">
                        <button type="button"
                                class="btn btn-outline-danger"
                                style="margin:1px; font-size: small;"
                                title="Borrar nota"
                                onclick="deleteNote(false)">
                            üóë Borrar √∫ltima nota
                        </button>
                        <button type="button"
                                class="btn btn-outline-danger"
                                style="margin:1px; font-size: small;"
                                title="Borrar todo el incipit"
                                onclick="deleteNote(true)">
                            üóë Borrar todo
                        </button>

                    </div>




                </div>

                <!-- CANVAS A LA DERECHA, TIPO PENTAGRAMA REAL -->
                <div class="flex-grow-1">
                <div class="position-relative d-inline-block w-100">
                    <canvas id="incipit_canvas_0"
                            width="520"
                            height="160"
                            style="display:block; max-width:100%;"></canvas>
                </div>
                </div>

            </div>
            </div>




</div>


        <!-- TEXTAREA PAE RESALTADA -->
        <div class="mb-2">
          <small class="text-muted">
            El c√≥digo PAE generado por el incipit se guardar√° en el campo $p.
          </small>
        </div>

        <div class="row g-3 mb-3">
          <div class="col-12">
            <label for="incipit_p_0" class="form-label fw-semibold">
              C√≥digo Plaine &amp; Easie (031 $p)
            </label>
            <textarea
              name="incipit_p_0"
              id="incipit_p_0"
              class="form-control form-control-sm bg-white border border-2 border-primary font-monospace"
              rows="3"
              placeholder="Aqu√≠ se mostrar√° el c√≥digo Plaine and Easy Code generado autom√°ticamente"></textarea>
          </div>

          <!-- Campos ocultos auxiliares -->
          <div class="col-12">
            <input type="hidden" id="incipitPaec" name="incipit_paec_0">
            <input type="hidden" id="incipitTransposition" name="incipit_transp_0">
          </div>
        </div>
      </div>

      <!-- URLs repetibles para este incipit -->
      <div class="subcampo-group">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <label class="subcampo-label mb-0">$u URL Uniforme de Recursos</label>
          <button type="button"
                  class="btn btn-outline-primary btn-sm"
                  onclick="agregarURLIncipit(0)">
            <i class="bi bi-plus"></i> URL
          </button>
        </div>
        <div id="incipit-0-urls">
          <div class="mb-2" data-subcampo="url-0-0">
            <div class="input-group input-group-sm">
              <input type="url"
                     name="incipit_u_0_0"
                     class="form-control"
                     placeholder="https://...">
              <button type="button"
                      class="btn btn-outline-danger"
                      onclick="eliminarSubcampo('url-0-0')">
                <i class="bi bi-x"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button type="button"
            class="btn btn-outline-primary btn-add-field mt-3"
            onclick="agregarIncipit()">
      <i class="bi bi-plus-circle"></i> Agregar Incipit
    </button>
  </div>
</div>

<!-- 040 - Fuente de Catalogaci√≥n -->
<div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
        <h2 class="section-title">040 - Fuente de Catalogaci√≥n</h2>
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label small">$a Centro Catalogador</label>
                <input type="text" name="centro_catalogador" class="form-control" value="UNL" placeholder="UNL" maxlength="10">
                <small class="text-muted">Predeterminado: UNL</small>
            </div>
        </div>
    </div>
</div>

<!-- 041 - C√≥digo de Lengua (Repetible con idiomas repetibles) -->
<div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
        <h2 class="section-title">041 - C√≥digo de Lengua</h2>
        <div id="codigo-lengua-container">
            <div class="campo-repetible" data-campo="codigo-lengua-0">
                <div class="campo-header">
                    <span class="campo-label">C√≥digo de Lengua #1</span>
                    <button type="button" class="btn btn-outline-danger btn-remove" onclick="eliminarCampo('codigo-lengua-0')">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </div>

                <div class="row g-2 mb-3">
                    <div class="col-md-6">
                        <label class="subcampo-label">Indicador 1 - C√≥digo de Traducci√≥n</label>
                        <select name="codigo_lengua_ind1_0" class="form-select">
                            {% for value, label in indicacion_traduccion %}
                            <option value="{{ value }}" {% if value == '0' %}selected{% endif %}>{{ value }} - {{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="subcampo-label">Indicador 2 - C√≥digo de Fuente</label>
                        <select name="codigo_lengua_ind2_0" class="form-select">
                            {% for value, label in fuente_codigo %}
                            <option value="{{ value }}" {% if value == '#' %}selected{% endif %}>{{ value }} - {{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- Idiomas repetibles -->
                <div class="subcampo-group">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="subcampo-label mb-0">$a C√≥digo de Lengua del Texto/Banda Sonora</label>
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="agregarIdiomaObra(0)">
                            <i class="bi bi-plus"></i> Idioma
                        </button>
                    </div>
                    <div id="codigo-lengua-0-idiomas">
                        <div class="mb-2" data-subcampo="idioma-0-0">
                            <div class="input-group input-group-sm">
                                <select name="codigo_lengua_a_0_0" class="form-select form-select-sm">
                                    {% for value, label in codigos_idioma %}
                                    <option value="{{ value }}" {% if value == 'spa' %}selected{% endif %}>{{ label }}</option>
                                    {% endfor %}
                                </select>
                                <button type="button" class="btn btn-outline-danger" onclick="eliminarSubcampo('idioma-0-0')">
                                    <i class="bi bi-x"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-outline-primary btn-add-field" onclick="agregarCodigoLengua()">
            <i class="bi bi-plus-circle"></i> Agregar C√≥digo de Lengua
        </button>
    </div>
</div>

<!-- 044 - C√≥digo de Pa√≠s (Repetible) -->
<div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
        <h2 class="section-title">044 - C√≥digo de Pa√≠s de Entidad Productora/Editora</h2>
        <div id="codigo-pais-container">
            <div class="campo-repetible" data-campo="codigo-pais-0">
                <div class="campo-header">
                    <span class="campo-label">C√≥digo de Pa√≠s #1</span>
                    <button type="button" class="btn btn-outline-danger btn-remove" onclick="eliminarCampo('codigo-pais-0')">
                        <i class="bi bi-trash"></i> Eliminar
                    </button>
                </div>
                <div class="row g-2">
                    <div class="col-md-12">
                        <label class="subcampo-label">$a C√≥digo de Pa√≠s</label>
                        <select name="codigo_pais_a_0" class="form-select">
                            {% for codigo, nombre in codigos_pais %}
                            <option value="{{ codigo }}" {% if codigo == 'ec' %}selected{% endif %}>{{ nombre }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-outline-primary btn-add-field" onclick="agregarCodigoPais()">
            <i class="bi bi-plus-circle"></i> Agregar C√≥digo de Pa√≠s
        </button>
    </div>
</div>

<!-- 092 - Clasificaci√≥n Local -->
<div class="card border-0 shadow-sm mb-4">
    <div class="card-body">
        <h2 class="section-title">092 - Clasificaci√≥n Local</h2>
        <div class="alert alert-info" role="alert">
            <i class="bi bi-info-circle"></i>
            <small>Los campos de este bloque se generan autom√°ticamente a partir de otros campos. Se completan al guardar la obra.</small>
        </div>
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label small">$a Instituci√≥n</label>
                <input type="text" name="clasif_institucion" class="form-control" value="UNL" readonly disabled>
                <small class="text-muted">Copia del campo 040 $a</small>
            </div>
            <div class="col-md-6">
                <label class="form-label small">$b Proyecto</label>
                <input type="text" name="clasif_proyecto" class="form-control" value="BLMP" readonly disabled>
                <small class="text-muted">Predeterminado: BLMP</small>
            </div>
        </div>
        <div class="row g-3 mt-2">
            <div class="col-md-4">
                <label class="form-label small">$c Pa√≠s</label>
                <input type="text" name="clasif_pais" class="form-control" readonly disabled placeholder="Del campo 044 $a">
                <small class="text-muted">Copia del primer pa√≠s (044 $a)</small>
            </div>
            <div class="col-md-4">
                <label class="form-label small">$d Ms/Imp</label>
                <input type="text" name="clasif_ms_imp" class="form-control" readonly disabled placeholder="Ms o Imp">
                <small class="text-muted">Seg√∫n tipo de registro (L√≠der/06)</small>
            </div>
            <div class="col-md-4">
                <label class="form-label small">$0 N√∫mero de Control</label>
                <input type="text" name="clasif_num_control" class="form-control" readonly disabled placeholder="Del campo 001">
                <small class="text-muted">Copia del campo 001</small>
            </div>
        </div>
    </div>
</div>
